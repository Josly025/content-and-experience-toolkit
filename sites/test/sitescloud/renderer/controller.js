/**
 * Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.
 * Licensed under the Universal Permissive License v 1.0 as shown at http://oss.oracle.com/licenses/upl.
 */
"use strict";var SCS=window.SCS||{};SCS.sitePrefix=SCS.sitePrefix||"/",SCS.data={pageId:null,siteInfo:null,structure:null,structurePages:null,basePageModel:null,baseSlotReuseModel:null,pageModel:null,pageLayout:null,mobileLayout:null,navMap:{},navRoot:null,placeholderContent:null,startProgressTimer:null,pageTimeoutTimer:null},SCS.performance={timers:{}},SCS.xmlhttp=new XMLHttpRequest,Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),SCS.preInitRendering=SCS.preInitRendering||function(){},SCS.initRendering=function(){this.data.startProgressTimer=setTimeout(this.onStartProgress,2500),this.data.pageTimeoutTimer=setTimeout(this.onPageTimeout,3e4),this.setCacheKeys(),this.processSitePrefix(),this.isPrerenderEnvironment()&&this.addMetaTag("prerender-site-prefix",this.sitePrefix),this.data.pageLocale?this.getLocaleSiteStructure():this.getSiteStructure(this.processSiteStructure)},SCS.isValidLocale=function(e){return-1!==["af","sq","am","ar","ar-DZ","ar-BH","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LB","ar-LY","ar-MA","ar-OM","ar-QA","ar-SA","ar-SY","ar-TN","ar-AE","ar-YE","hy","as","az","az-AZ","az-Cyrl-AZ","az-Latn-AZ","eu","be","bn","bs","bg","my","ca","zh","zh-CN","zh-HK","zh-MO","zh-SG","zh-TW","hr","cs","da","dv","nl","nl-BE","nl-NL","en","en-CB","en-AU","en-BZ","en-CA","en-IN","en-IE","en-JM","en-NZ","en-PH","en-ZA","en-TT","en-GB","en-US","et","fo","fi","fr","fr-BE","fr-CA","fr-FR","fr-LU","fr-CH","gl","ka","de","de-AT","de-DE","de-LI","de-LU","de-CH","el","gn","gu","he","hi","hu","is","id","it","it-IT","it-CH","ja","kn","ks","kk","km","ko","lo","la","lv","lt","mk","ms","ms-BN","ms-MY","ml","mt","mi","mr","mn","ne","zxx","no","no-NO","nb","nn","or","pa","fa","pl","pt","pt-BR","pt-PT","rm","ro","ro-MO","ru","ru-MO","sa","gd","gd-IE","sr","sr-SP","sr-RS","sr-Cyrl-RS","sr-Latn-RS","sd","si","sk","sl","so","es","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-SV","es-GT","es-HN","es-MX","es-NI","es-PA","es-PY","es-PE","es-PR","es-ES","es-UY","es-VE","sw","sv","sv-FI","sv-SE","tg","ta","tt","te","th","bo","ts","tn","tr","tk","uk","und","ur","uz","uz-UZ","uz-Cyrl-UZ","uz-Latn-UZ","vi","cy","xh","yi","zu"].indexOf(e)||"root"===e},SCS.processSitePrefix=SCS.processSitePrefix||function(e){if(e=e||window.location.pathname,e=decodeURI(e)){e.startsWith("/mobileauthsite/")&&this.sitePrefix.startsWith("/authsite/")&&(this.sitePrefix=this.sitePrefix.replace("/authsite/","/mobileauthsite/")),e.startsWith(this.sitePrefix)||e!==this.sitePrefix.substring(0,this.sitePrefix.length-1)&&(this.sitePrefix="/");var t=e.replace(this.sitePrefix,""),r=t&&t.split("/")[0];r&&SCS.isValidLocale(r)&&(this.data.locale=r,"root"!==r&&(this.data.pageLocale=r))}},SCS.setCacheKeys=SCS.setCacheKeys||function(e){var t={product:(e=e||window.SCSCacheKeys||{}).product||"",site:e.site||"",theme:e.theme||"",component:e.component||"",caas:e.caas||""};SCS.cacheKeys=t},SCS.onStartProgress=function(){var e=document.getElementById("scsWaitImage");e&&(e.style.display="block")},SCS.onPageTimeout=function(){SCS.clearWaitImage()},SCS.clearWaitImage=function(){var e=document.getElementById("scsWaitImage");e&&(e.style.display="none")},SCS.clearTimers=function(){null!==this.data.pageTimeoutTimer&&(window.clearTimeout(this.data.pageTimeoutTimer),this.data.pageTimeoutTimer=null),null!==this.data.startProgressTimer&&(window.clearTimeout(this.data.startProgressTimer),this.data.startProgressTimer=null)},SCS.onRenderError=function(e){this.clearTimers(),this.clearWaitImage(),this.logError(e)},SCS.logError=function(e){try{e&&window.console&&window.console.error?window.console.error(e):e&&window.console&&window.console.log&&window.console.log(e)}catch(e){}},SCS.parseJson=function(e){var t=null;try{t=JSON.parse(e)}catch(t){throw this.onRenderError("Failed to parse JSON: "+e+" Message: "+t.message),t}return t},SCS.encodeHTML=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&"<>'\/]/g,function(e){return t[e]})},SCS.getProductUrl=function(e){var t=!1!==(e=e||{}).useCacheKeys&&SCS.cacheKeys.product?SCS.cacheKeys.product:"",r=t?"/"+SCS.cacheKeys.product:"",s=t?SCS.cacheKeys.product+"/":"",a=e.useSharedUrl?"/_sitesclouddelivery"+r:this.sitePrefix+s+"_sitesclouddelivery";return SCS.sitesCloudCDN&&"string"==typeof SCS.sitesCloudCDN&&!1!==e.useCDN&&(a=SCS.sitesCloudCDN+"/_sitesclouddelivery"),a},SCS.getPageLayout=function(e){if(e){var t=SCS.cacheKeys.theme?SCS.cacheKeys.theme+"/":"",r=SCS.sitePrefix+t+"_themesdelivery/"+encodeURIComponent(this.data.siteInfo.properties.themeName)+"/layouts/"+encodeURIComponent(e);SCS.performance.startTimer("GET layout"),this.callService(r,this.processPageLayout,this.processPageLayout)}else this.onRenderError("A page layout was not specified in the page model.")},SCS.processPageLayout=function(e,t,r){if(r=r||document,SCS.performance.stopTimer("GET layout"),!t||200!=e.status||"string"!=typeof t||t.search(/id=(["'])scsControllerBody\1/g)>=0){var s=this.getErrorPageId();this.data.isRenderingErrorPage||null===s?this.onRenderError("The page layout could not be obtained from the server."):(this.data.isRenderingErrorPage=!0,this.data.pageId=s,this.fetchPageData())}else{t=this.preFillPageLayout(t);for(var a=[{re:/(<!--\$\s*SCS_SITE_HEADER\s*-->)|(\[!--\$\s*SCS_SITE_HEADER\s*--\])/g,src:"siteInfo.properties.header"},{re:/(<!--\$\s*SCS_SITE_FOOTER\s*-->)|(\[!--\$\s*SCS_SITE_FOOTER\s*--\])/g,src:"siteInfo.properties.footer"},{re:/(<!--\$\s*SCS_PAGE_HEADER\s*-->)|(\[!--\$\s*SCS_PAGE_HEADER\s*--\])/g,src:"pageModel.properties.header"},{re:/(<!--\$\s*SCS_PAGE_FOOTER\s*-->)|(\[!--\$\s*SCS_PAGE_FOOTER\s*--\])/g,src:"pageModel.properties.footer"}],i=0;i<a.length;i++){for(var n=a[i].re,o=a[i].src.split("."),c="",l=this.data,S=0;S<o.length-1;S++){if(!l[o[S]]||"object"!=typeof l[o[S]]){l=null;break}l=l[o[S]]}l&&(c="string"==typeof l[o[o.length-1]]?l[o[o.length-1]]:""),t=t.replace(n,c)}!1;var h=SCS.cacheKeys.theme?SCS.cacheKeys.theme+"/":"";SCS.cacheKeys.product&&SCS.cacheKeys.product;t=(t=(t=t.replace(/(["'])\/_sitescloud(\/renderer\/require\.js)/g,"$1"+this.getProductUrl({useCDN:!SCS.useSharedRequireJS&&!SCS.useOriginalRequireJS,useSharedUrl:SCS.useSharedRequireJS})+"$2")).replace(/(["'])\/_sitescloud\//g,"$1"+this.getProductUrl()+"/")).replace(/(["'])\/_themes\//g,"$1"+this.sitePrefix+h+"_themesdelivery/"),t=this.resolveLinks(t),t=this.applySlotReuseData(t);var d=this.getPageModelStyleMarkup();d&&(t=t.replace(/(\s+|>)(<\/head\s*>(?:\s+|<))/i,function(e,t,r){var s=t+d+r;return d="",s}));var u=this.getWebAnalyticsMarkup()||"",p=!1;t=t.replace(/(<!--\$\s*SCS_WEB_ANALYTICS_SCRIPT\s*-->)|(\[!--\$\s*SCS_WEB_ANALYTICS_SCRIPT\s*--\])/g,function(e,t,r){return p=!0,u}),u&&!p&&(t=t.replace(/(\s+|>)(<\/head\s*>(?:\s+|<))/i,function(e,t,r){return t+u+r})),t=this.injectWyciwygCacheBuster(t),this.isPrerenderEnvironment()&&(t=this.injectMarkupInHead(t,'<meta name="prerender-site-prefix" content="'+this.sitePrefix+'">'),this.data.isRendering404Condition&&(t=this.injectMarkupInHead(t,'<meta name="prerender-status-code" content="404">'))),SCS.performance.stopTimer("CONTROLLER"),SCS.performance.startTimer("WriteLayout");var g={siteId:this.data.siteInfo&&this.data.siteInfo.properties&&this.data.siteInfo.properties.siteName?this.data.siteInfo.properties.siteName:null,sitePrefix:this.sitePrefix,pageModel:this.data.pageModel,localePageModel:this.data.localePageModel,pageLanguageCode:this.data.pageLocale,navigationRoot:this.data.navRoot,navigationCurr:this.data.pageId&&"string"==typeof this.data.pageId?parseInt(this.data.pageId):this.data.pageId,structureMap:this.data.navMap,siteInfo:this.data.siteInfo,placeholderContent:this.data.placeholderContent,deviceInfo:SCS.getDeviceInfo(),sitesCloudCDN:"string"==typeof SCS.sitesCloudCDN&&SCS.sitesCloudCDN||"",performance:{timers:SCS.performance.timers},cacheKeys:this.cacheKeys},f=JSON.stringify(g),C="";C+='<script id="scsRenderInfo" type="application/json">',C+=this.encodeHTML(f),C+="<\/script>",C+='\n<script id="scsRenderObject" type="text/javascript">var require = {waitSeconds: 0};<\/script>',C+=d;t=t.replace(/(<!--\$\s*SCS_RENDER_INFO\s*-->)|(\[!--\$\s*SCS_RENDER_INFO\s*--\])/g,function(){return C}),this.clearTimers(),this.clearWaitImage(),SCS={},r.open("text/html","replace"),r.write(t),r.close()}},SCS.preFillPageLayout=SCS.preFillPageLayout||function(e){var t,r,s,a,i,n,o,c,l,S,h,d=e,u=this.data.pageModel,p=this.data.localePageModel||{};if(u&&u.componentInstances)for(S in i=u.componentInstances)if(i.hasOwnProperty(S)&&"object"==typeof i[S]&&(n=i[S],c=p.componentInstances&&p.componentInstances[S]||{},n&&(o=n.data,l=c.data||{},a="string"==typeof n.type&&0===n.type.indexOf("scs-inline-")))){if(o&&"string"==typeof o.innerHTML){var g=l.innerHTML||o.innerHTML;r=a?"":'<div class="scs-component-bounding-box">',s=a?"":"</div>","string"==typeof(t=this.replaceTagContent(d,S,r+g+s))&&(d=t,n.preRenderedByController=!0)}(h=this.getComponentAttributes(o,l))&&"object"==typeof h&&(d=this.replaceTagAttributes(d,S,h),n.preRenderedByController=!0)}return d},SCS.getComponentAttributes=function(e,t){var r,s,a,i={},n=t||{};if(e&&"object"==typeof e)for(s in e)"attr_"==s.substring(0,"attr_".length)&&(a=s.substring("attr_".length))&&(i[a]=n[s]||e[s],r=i);return r},SCS.replaceTagAttributes=function(e,t,r){var s,a,i,n,o,c,l,S,h,d=e,u="(<\\w+\\s+)[^>]*[Ii][Dd]=([\"']?)"+t+"\\2(>|[^>]*)>",p={},g="",f="";try{if(e&&t&&Object.keys(r).length>0&&(h=(i=new RegExp(u,"g")).exec(e))){for(f in s=h.index,a=i.lastIndex,S="/"==(n=e.substring(s,a))[n.length-2],o=h[1],c=S?"/>":">",l=n.substring(o.length,n.length-c.length),p=SCS.parseTagAttributes(l),r)p[f]=r[f];for(f in g="",p)void 0===p[f]?g+=f+" ":g+=f+'="'+p[f]+'" ';d=e.substring(0,s+o.length),d+=g,d+=e.substring(s+o.length+l.length)}}catch(e){SCS.logError("Failed to replace attributes: "+e.message)}return d},SCS.parseTagAttributes=function(e){for(var t={},r="",s="",a="",i="",n=e.length,o=0,c=0;c>=0&&c<n;){for(;c<n&&" "==(a=e.charAt(c));c++);if(c==n)break;for(o=c;c<n&&(" "!=(a=e.charAt(c))&&"="!=a);c++);for(r=e.substr(o,c-o);c<n&&" "==(a=e.charAt(c));c++);if("="==a){for(c+=1;c<n&&" "==(a=e.charAt(c));c++);for("'"==a||'"'==a?(i=a,c+=1):i=" ",o=c;c<n&&(a=e.charAt(c))!=i;c++);s=e.substr(o,c-o),t[r]=s,c++}else t[r]=void 0,o=c}return t},SCS.replaceTagContent=function(e,t,r,s){var a,i,n,o,c,l=null;s=s||{};try{(c=(o=new RegExp("<(\\w+)\\s+[^>]*[Ii][Dd]=([\"']?)"+t+"\\2(>|[^>]*)>","g")).exec(e))&&(c.index,a=o.lastIndex,n=c[1],(i=this.findEndTag(e,n,a))>=0&&(l=e.substring(0,s.append?i:a),l+=r,l+=e.substring(i)))}catch(e){SCS.logError("Failed to replace content: "+e.message)}return l},SCS.findEndTag=function(e,t,r){var s,a,i,n,o=-1;try{if((s=new RegExp("</"+t+"\\s*>","gi")).lastIndex=r,a=s.exec(e)){o=a.index,(i=new RegExp("<"+t+"\\s*>","gi")).lastIndex=r;do{if(n=i.exec(e)){if(n.index>o)break;(a=s.exec(e))&&(o=a.index)}}while(n&&a)}}catch(e){SCS.logError("Failed to find end tag: "+e.message)}return o},SCS.injectWyciwygCacheBuster=function(e){var t=e;return"number"==typeof window.mozInnerScreenX&&('<script type="text/javascript">\n','if( 0 === document.URL.indexOf("wyciwyg://") ) { \n',"window.location.replace( window.location.href ); ","}\n<\/script>",t=this.injectMarkupInHead(t,'<script type="text/javascript">\nif( 0 === document.URL.indexOf("wyciwyg://") ) { \nwindow.location.replace( window.location.href ); }\n<\/script>')),t},SCS.injectMarkupInHead=function(e,t){var r,s=e,a=/<head(?:\s+[^>]*?)?>/gi.exec(e);return a&&a[0]&&(r=a.index+a[0].length,s=e.substr(0,r),s+="\n",s+=t,s+=e.substr(r)),s},SCS.addMetaTag=function(e,t,r){if(r=r||"name",e&&"string"==typeof e&&e.length>0&&r&&"string"==typeof r&&r.length>0&&t&&"string"==typeof t){var s=document.getElementsByTagName("head");if(s&&s.length>0&&s[0]){var a=document.createElement("meta");a.setAttribute(r,e),a.content=t,s[0].appendChild(a)}}},SCS.getPageModelStyleMarkup=function(){var e,t,r,s,a="";try{for(r in e=this.data.pageModel.properties.styles,a+=this.getStyleMarkup("scs-styles-body","body",e),this.data.pageModel.slots)t=this.data.pageModel.slots[r],s=this.data.pageModel.componentInstances,a+=this.getContainerStyleMarkup(r,t,s,!0)}catch(e){a=""}return a.length>0&&(a='\n<style id="scsPageStyles" type="text/css">'+a+"\n</style>"),a},SCS.getContainerStyleMarkup=function(e,t,r,s){var a,i,n,o,c,l,S="";if(t&&(a=t.styles,o=s?"scs-slot-styles-":"scs-container-styles-",c=this.encodeHTML("#"+e)+(s?"":" > .scs-container-styles > .scs-component-content"),S+=this.getStyleMarkup(o+e,c,a),t.components&&Array.isArray(t.components)))for(l=0;l<t.components.length;l++)"object"==typeof r[i=t.components[l]]&&("scs-componentgroup"!==(n=r[i]).type&&"scs-sectionlayout"!==n.type||(S+=this.getContainerStyleMarkup(i,n.data,r,!1)));return S},SCS.getStyleMarkup=function(e,t,r){var s,a,i,n,o,c="";if(Array.isArray(r)&&r.length>0){for(c+="\n"+t+" {",a=0;a<r.length;a++)"string"==typeof(s=r[a])&&(i=s.indexOf(":"))>=0&&(n=s.substring(0,i).trim(),o=s.substring(i+1).trim(),n.indexOf(">")<0&&n.indexOf("<")<0&&o.indexOf(">")<0&&o.indexOf("<")<0&&(c+="\n"+n+": "+(o=this.resolveLinks(o))+";"));c+="\n}"}return c},SCS.getWebAnalyticsMarkup=function(){var e=null,t=this.data.pageModel,r=this.data.siteInfo;return t&&t.properties&&!0===t.properties.overrideWebAnalytics?e=t.properties.webAnalyticsScript:r&&r.properties&&!0===r.properties.isWebAnalyticsEnabled&&(e=r.properties.webAnalyticsScript),e},SCS.applySlotReuseData=function(e){var t=this.getIdentifiedSlotIds(e);return this.fixupPageModelWithSlotReuseData(t.slotIds),t.pageLayout},SCS.getIdentifiedSlotIds=function(e){var t,r,s,a,i,n,o;if(e=e.replace(/<!--\s*SCS Layout Information:\s*(\{[\s\S]*?\})\s*-->/,function(e,r){try{var s=JSON.parse(r);t=s.slotIds}catch(e){}return""}),!Array.isArray(t)&&(t=[],s=/<\w+\s+[^>]*?[Cc][Ll][Aa][Ss][Ss]\s*=\s*(['"])(?:\s*|[^>'"]*?\s+)scs-slot(?:\s*\1|\s+[^>'"]*?\1)[^>]*?>/g,r=e.match(s)))for(i=/\s+id\s*=\s*(['"])([^'">]+)\1(?:\s+|\/?>)/i,o=0;o<r.length;o++)(a=r[o].match(i))&&(n=a[2])&&t.push(n);return{pageLayout:e,slotIds:t}},SCS.fixupPageModelWithSlotReuseData=function(e){var t,r,s,a,i,n=this.data.pageModel,o=this.data.baseSlotReuseModel;if(o&&e)for(i=0;i<e.length;i++)if("object"==typeof o[t=e[i]]&&"object"==typeof o[t].base&&o[t].base.site&&"object"==typeof o[t].base.site&&(r=JSON.parse(JSON.stringify(o[t].base.site)),n.slots[t]=r,r.componentInstances)){for(s in r.componentInstances)a=JSON.parse(JSON.stringify(r.componentInstances[s])),n.componentInstances[s]=a;delete r.componentInstances}},SCS.callService=function(e,t,r){this.xmlhttp.onreadystatechange=function(){var s;if(4==this.readyState)if(200==this.status)s=""+this.responseText,t.call(SCS,this,s);else if(r)s=""+this.responseText,r.call(SCS,this,s);else{try{s=""+this.responseText}catch(e){}SCS.onRenderError("Status "+this.status+" returned from "+e+" with response: "+s)}},this.xmlhttp.open("GET",e,!0),this.xmlhttp.send()},SCS.resolveLinks=function(e){var t=e;"object"==typeof e&&(t=JSON.stringify(e));for(var r=this,s=(SCS.cacheKeys.product&&SCS.cacheKeys.product,SCS.cacheKeys.site?SCS.cacheKeys.site+"/":""),a=SCS.cacheKeys.theme?SCS.cacheKeys.theme+"/":"",i=SCS.cacheKeys.component?SCS.cacheKeys.component+"/":"",n=SCS.cacheKeys.caas?"?cb="+SCS.cacheKeys.caas:"",o=r.data.siteInfo.properties.channelAccessTokens||[],c="",l=0;l<o.length;l++){var S=o[l];if("defaultToken"===S.name){c=(n?"&":"?")+"channelToken="+S.value;break}}var h=r.data.siteInfo.properties.siteRootPrefix;h&&h.indexOf("/authsite/");t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/(<!--\$\s*SCS_CONTENT_URL\s*-->)|(\[!--\$\s*SCS_CONTENT_URL\s*--\])/g,function(){return SCS.sitePrefix+s+"content"})).replace(/(<!--\$\s*SCS_COMP_CATALOG_URL\s*-->)|(\[!--\$\s*SCS_COMP_CATALOG_URL\s*--\])/g,function(){return SCS.sitePrefix+i+"_compdelivery"})).replace(/(<!--\$\s*SCS_DIST_FOLDER\s*-->)|(\[!--\$\s*SCS_DIST_FOLDER\s*--\])/g,function(){return SCS.getProductUrl()})).replace(/(<!--\$\s*SCS_DIST_IMG_FOLDER\s*-->)|(\[!--\$\s*SCS_DIST_IMG_FOLDER\s*--\])/g,function(){return SCS.getProductUrl()+"/renderer"})).replace(/(<!--\$\s*SCS_RENDERER_PATH\s*-->)|(\[!--\$\s*SCS_RENDERER_PATH\s*--\])/g,function(){return SCS.getProductUrl()+"/renderer"})).replace(/(<!--\$\s*SCS_SITE_PATH\s*-->)|(\[!--\$\s*SCS_SITE_PATH\s*--\])/g,function(){return(SCS.sitePrefix+s).replace(/\/+$/,function(){return""})})).replace(/(_scs_theme_root_)/g,function(){return SCS.sitePrefix+a+"_themesdelivery/"+encodeURIComponent(r.data.siteInfo.properties.themeName)})).replace(/(_scs_design_name_)/g,function(){return encodeURIComponent(r.data.siteInfo.properties.designName||"default")})).replace(/(<!--\$\s*SCS_THEME_NAME\s*-->)|(\[!--\$\s*SCS_THEME_NAME\s*--\])/g,function(){return encodeURIComponent(r.data.siteInfo.properties.themeName)})).replace(/(<!--\$\s*SCS_DESIGN_NAME\s*-->)|(\[!--\$\s*SCS_DESIGN_NAME\s*--\])/g,function(){return encodeURIComponent(r.data.siteInfo.properties.designName||"default")})).replace(/\[!--\$\s*SCS_PAGE\s*--\]\s*(.*?)\s*\[\/!--\$\s*SCS_PAGE\s*--\]/g,function(e,t){var r,s=SCS.getPageLinkData(t);return s&&"string"==typeof s.href&&(r=s.href),r});var d=function(e){var t=e.split(","),r=t[0].trim(),s=t.length>1?t[1].trim():"",a=t.length>2?t[2].trim():"",i=s&&a?r+"/"+s+n+c+(n||c?"&":"?")+"format="+a:r+"/native"+n+c;return t.length>3&&/^(true|1)/i.test(t[3].trim())&&(i+=i.indexOf("?")<0?"?":"&",i+="download=true"),i};return t=(t=(t=(t=t.replace(/\[!--\$\s*SCS_DIGITAL_ASSET\s*--\]\s*(.*?)\s*\[\/!--\$\s*SCS_DIGITAL_ASSET\s*--\]/g,function(e,t){return"/content/published/api/v1.1/assets/"+d(t)})).replace(/\[!--\$\s*SCS_DIGITAL_ASSET_PUBLISHED\s*--\]\s*(.*?)\s*\[\/!--\$\s*SCS_DIGITAL_ASSET_PUBLISHED\s*--\]/g,function(e,t){return"/content/published/api/v1.1/assets/"+d(t)})).replace(/\[!--\$SCS_TEL--\]*(.*?) *\[\/!--\$SCS_TEL--\]/g,function(e,t){return"tel:"+encodeURI(t)})).replace(/<!--\s*SCS View Mode:([\s\S]*?)-->/g,function(e,t){return t}),"object"==typeof e&&(t=JSON.parse(t)),t},SCS.getPageLinkData=function(e){var t,r,s=!1,a=null,i=this.data.navMap,n="";if(i&&("number"==typeof e||"string"==typeof e&&e)){var o=i[e];if(o){if("string"==typeof o.linkUrl&&o.linkUrl.trim().length>0)t=o.linkUrl.trim(),"string"==typeof o.linkTarget&&(n=o.linkTarget.trim());else if(a=o.pageUrl){var c=this.data.locale;if(c){var l=this.combineUrlSegments(this.sitePrefix,c);t=this.combineUrlSegments(l,a)}else t=this.combineUrlSegments(this.sitePrefix,a)}s=!0===o.hideInNavigation}}return t&&(r={href:t,target:n,hideInNavigation:s}),r},SCS.combineUrlSegments=function(e,t){var r="";return"string"==typeof e&&"string"==typeof t&&e.length>0&&t.length>0&&(r="/"==e.charAt(e.length-1)&&"/"==t.charAt(0)?e+t.substring(1):"/"==e.charAt(e.length-1)&&"/"!=t.charAt(0)||"/"!=e.charAt(e.length-1)&&"/"==t.charAt(0)?e+t:e+"/"+t),r},SCS.getLocaleSiteStructure=function(){var e=SCS.cacheKeys.site?SCS.cacheKeys.site+"/":"",t=SCS.sitePrefix+e+this.data.pageLocale+"_structure.json";SCS.performance.startTimer("GET structure.json"),this.callService(t,this.processLocaleSiteStructure,this.processNoLocaleSiteStructure)},SCS.processLocaleSiteStructure=function(e,t){var r,s=!1;try{var a=JSON.parse(t);s=!!(r=a&&a.siteInfo&&a.siteInfo.base)}catch(e){}s?this.isMlsSite(r)?-1!==(r.properties&&r.properties.availableLanguages||[]).indexOf(this.data.pageLocale)?this.processSiteStructure(e,t):this.processSiteStructureRedirect(e,t):this.processSiteStructure(e,t):this.processNoLocaleSiteStructure()},SCS.processNoLocaleSiteStructure=function(){SCS.getSiteStructure(this.processSiteStructureRedirect)},SCS.processSiteStructureRedirect=function(e,t){var r=this.parseJson(t),s=r.siteInfo&&r.siteInfo.base,a=this.getDefaultLanguage(s);if(this.isMlsSite(s)&&a&&this.data.pageLocale!==a){var i=window.location.pathname,n=this.sitePrefix+i.replace(this.sitePrefix,"").replace(this.data.pageLocale,a);this.redirectToUrl(this.getRedirectUrl(n))}else delete this.data.locale,delete this.data.pageLocale,this.processSiteStructure(e,t)},SCS.getSiteStructure=function(e){var t=SCS.cacheKeys.site?SCS.cacheKeys.site+"/":"",r=SCS.sitePrefix+t+"structure.json";SCS.performance.startTimer("GET structure.json"),this.callService(r,e)},SCS.getDefaultLanguage=function(e){var t=e||this.data.siteInfo;return t&&t.properties&&t.properties.defaultLanguage},SCS.isMlsSite=function(e){return!!this.getDefaultLanguage(e)},SCS.processSiteStructure=function(e,t){SCS.performance.stopTimer("GET structure.json");var r=this.parseJson(t);this.data.structure=r;var s=r.siteInfo;s&&(this.data.siteInfo=s.base),this.produceSiteNavigationStructure()},SCS.produceSiteNavigationStructure=function(){var e=this.data.structure.base&&this.data.structure.base.pages?this.data.structure.base.pages:[];this.data.structurePages=e;for(var t=this.data.structurePages||[],r=0;r<t.length;r++){var s=t[r];this.data.navMap[s.id]=s,null==s.parentId&&(this.data.navRoot=s.id)}this.getPageData()},SCS.getSlotReuseData=function(){var e=SCS.cacheKeys.site?SCS.cacheKeys.site+"/":"",t=SCS.sitePrefix+e+"slots.json";SCS.performance.startTimer("GET slots.json"),this.callService(t,this.processSlotReuseData)},SCS.processSlotReuseData=function(e,t){SCS.performance.stopTimer("GET slots.json");try{if(!t||200!=e.status||"string"!=typeof t||t.search(/id=(["'])scsControllerBody\1/g)>=0)throw"Invalid response received while fetching slot data.";var r=this.parseJson(t);this.data.baseSlotReuseModel=this.getEffectiveSlotReuseModel(r)}catch(e){this.data.baseSlotReuseModel=null}this.getPageData()},SCS.getPageData=function(e){e=e||window.location.pathname,e=decodeURI(e);try{var t=this.getPageId(e,"");if(!t&&this.isMlsSite()&&this.data.locale&&(t=this.getPageId(e,this.data.locale)),null==t&&null!==(t=this.getErrorPageId())&&(this.data.isRenderingErrorPage=!0,this.set404Condition({showErrorPage:!0})),null==t)return this.logError("The page could not be found in the site structure."),this.set404Condition({pageNotFound:!0}),void this.showErrorPage(404);this.data.pageId=t,this.fetchPageData(this.data.pageId)}catch(e){}},SCS.getPageId=function(e,t){var r,s=0,a=null,i=this.sitePrefix+t+"/";if(e){if(e===this.sitePrefix.substring(0,this.sitePrefix.length-1))throw this.redirectToUrl(this.getRedirectUrl(this.sitePrefix)),"URL redirect";if(t&&e===i.substring(0,i.length-1))throw this.redirectToUrl(this.getRedirectUrl(i)),"URL redirect";e=t&&0===e.indexOf(i)?e.replace(i,""):e.replace(this.sitePrefix,"")}for(s=0;s<this.data.structurePages.length;s++){if(e===this.data.structurePages[s].pageUrl){a=this.data.structurePages[s].id;break}r=r||!!this.data.structurePages[s].isDetailPage}return null==a&&0==e.length&&null!=this.data.navRoot&&(a=this.data.navRoot),null===a&&r&&(a=this.getDetailPageId(e)),a},SCS.getDetailPageId=function(e){var t,r,s,a,i,n,o,c=null;for(t=0;t<this.data.structurePages.length;t++)if(this.data.structurePages[t].isDetailPage&&(i=(s=(r=this.data.structurePages[t].pageUrl).lastIndexOf("."))>(a=r.lastIndexOf("/"))?s:r.length,n=s>a?r.substring(a+1,s):r.substr(a+1),r.length>0&&e.length>r.length&&r.substr(0,i)===e.substr(0,i)&&("/"===e.charAt(i)||0===n.length))){if(3===(o=(o=e.substring(i+1)).split("/")).length&&o[0].length>0&&o[1].length>0){c=this.data.structurePages[t].id,this.data.placeholderContent={contentType:o[0],contentId:o[1],contentSlug:o[2]};break}if(1===o.length&&o[0].length>0){c=this.data.structurePages[t].id,this.data.placeholderContent={contentType:"",contentId:"",contentSlug:o[0]};break}}return c},SCS.fetchPageData=function(){var e,t=SCS.cacheKeys.site?SCS.cacheKeys.site+"/":"";SCS.performance.startTimer("GET page.json"),this.isMlsSite()&&this.data.locale&&-1===[this.getDefaultLanguage(),"root"].indexOf(this.data.locale)?(e=SCS.sitePrefix+t+"pages/"+this.data.locale+"_"+this.data.pageId+".json",this.callService(e,this.processLocalePageData,this.processLocalePageData)):(e=SCS.sitePrefix+t+"pages/"+this.data.pageId+".json",this.callService(e,this.processPageData,this.processPageData))},SCS.processLocalePageData=function(e,t){try{if(!t||200!=e.status||"string"!=typeof t||t.search(/id=(["'])scsControllerBody\1/g)>=0)throw"Invalid response received while fetching locale page data.";var r=this.parseJson(t);this.data.localePageModel=r&&r.base||r}catch(e){this.logError("Unable to retrieve page data for locale: "+this.data.locale)}var s=SCS.cacheKeys.site?SCS.cacheKeys.site+"/":"",a=SCS.sitePrefix+s+"pages/"+this.data.pageId+".json";this.callService(a,this.processPageData,this.processPageData)},SCS.processPageData=function(e,t){SCS.performance.stopTimer("GET page.json");try{if(!t||200!=e.status||"string"!=typeof t||t.search(/id=(["'])scsControllerBody\1/g)>=0)throw"Invalid response received while fetching page data.";var r=this.parseJson(t);this.data.pageModel=this.getEffectivePageModel(r),this.data.pageLayout=this.data.pageModel.properties.pageLayout,this.data.mobileLayout=this.data.pageModel.properties.mobileLayout}catch(e){var s=this.getErrorPageId();if(this.data.isRenderingErrorPage||null===s)throw e;return this.data.isRenderingErrorPage=!0,this.data.placeholderContent=null,this.data.pageId=s,void this.fetchPageData()}this.data.localePageModel&&(this.data.pageModel=this.layerLocalePageProperties(this.data.pageModel,this.data.localePageModel)),this.getPageLayout(SCS.getDeviceInfo().isMobile&&this.data.mobileLayout||this.data.pageLayout)},SCS.layerLocalePageProperties=function(e,t){var r=e;return t.properties&&r.properties&&Object.keys(t.properties).forEach(function(e){r.properties[e]=t.properties[e]}),r},SCS.showErrorPage=function(e){var t=SCS.cacheKeys.theme?SCS.cacheKeys.theme+"/":"",r=SCS.sitePrefix+t+"_themesdelivery/"+encodeURIComponent(this.data.siteInfo.properties.themeName)+"/responsepages/"+encodeURIComponent(e)+".html";SCS.performance.startTimer("GET layout"),this.data.isRenderingResponsePage=!0,this.callService(r,this.processPageLayout)},SCS.set404Condition=function(){this.isPrerenderEnvironment()&&(this.data.isRendering404Condition=!0,this.addMetaTag("prerender-status-code","404"))},SCS.redirectToUrl=function(e){this.isPrerenderEnvironment()?(this.addMetaTag("prerender-status-code","301"),this.addMetaTag("prerender-header","Location: "+e)):window.location.replace?window.location.replace(e):window.location.href=e},SCS.getRedirectUrl=function(e){var t=e;return window.location.search&&window.location.search.length>0&&(t+=window.location.search),window.location.hash&&window.location.hash.length>0&&(t+=window.location.hash),t},SCS.getEffectivePageModel=function(e){var t=e&&e.base?e.base:{},r={};return r.properties=t.properties||{},r.slots=t.slots||{},r.componentInstances=t.componentInstances||{},r},SCS.getEffectiveSlotReuseModel=function(e){return e&&"object"==typeof e&&!Array.isArray(e)?e:{}},SCS.getErrorPageId=function(){var e=null;return this.data.siteInfo&&this.data.siteInfo.properties&&this.data.navMap&&"number"==typeof this.data.siteInfo.properties.errorPage&&this.data.navMap[this.data.siteInfo.properties.errorPage]&&(e=this.data.siteInfo.properties.errorPage),e},SCS.getDeviceInfo=SCS.getDeviceInfo||function(e){return e=e||navigator.userAgent,{isMobile:/Mobi|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e)&&!/iPad/i.test(e),isIOS:/iPad|iPhone|iPod/i.test(e)&&!window.MSStream}},SCS.isPrerenderEnvironment=SCS.isPrerenderEnvironment||function(e){return(e=e||navigator.userAgent).toLowerCase().indexOf("prerender")>=0},SCS.performance.startTimer=function(e){var t=SCS.performance.now(),r=SCS.performance.timers[e]||{};r.start=t,SCS.performance.timers[e]=r},SCS.performance.stopTimer=function(e){var t=SCS.performance.now(),r=SCS.performance.timers[e]||{};r.end=t,SCS.performance.timers[e]=r},SCS.performance.now=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},SCS.performance.startTimer("TOTAL"),SCS.performance.startTimer("CONTROLLER"),SCS.preInitRendering(),SCS.initRendering();
