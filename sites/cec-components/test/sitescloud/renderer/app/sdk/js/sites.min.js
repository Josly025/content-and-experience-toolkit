/**
 * Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.
 * Licensed under the Universal Permissive License v 1.0 as shown at http://oss.oracle.com/licenses/upl.
 */
var _core=function(){"use strict";function e(e,t){return s.replace("\x3c!--API--\x3e",e).replace("\x3c!--NEWAPI--\x3e",t)}function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){var t,r=document.createElement("a"),i={};r.href=e,t=r.search.replace(/^\?/,"").split("&");for(var o=0;o<t.length;o++){var n=t[o].split("=");i[n[0]]=decodeURIComponent(n[1])}return{protocol:r.protocol,host:r.host,hostname:r.hostname,port:r.port,pathname:r.pathname,search:r.search,parameters:i,hash:r.hash}}function i(e){var t={};return e?t=r(e).parameters:t}var o={component:["update","notify","refresh","appUpdate"],app:["notifyError","hostrequest"],appSettings:["messageResponse"]},n=function(){var e={LEVEL_NONE:0,LEVEL_ERROR:1,LEVEL_WARN:2,LEVEL_INFO:3,LEVEL_LOG:4},t={level:e.LEVEL_ERROR,writer:null},r=t,i=function(e,t){var o,n={};if(0===arguments.length){for(o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);return n}if("string"==typeof e&&void 0===t)return void 0===r[e]?null:r[e];if("string"==typeof e)r[e]=t;else{var s=e;for(o in s)s.hasOwnProperty(o)&&i(o,s[o])}},o=function(e,t,r){if(!(i("level")<e)){var s=n();null!==s&&(1==r.length&&r[0]instanceof Function&&(r=[r[0]()]),s[t]&&s[t].apply?s[t].apply(s,r):s[t]&&(s[t]=Function.prototype.bind.call(s[t],s),o(e,t,r)))}},n=function(){var e=null;return i("writer")?e=i("writer"):void 0!==window&&void 0!==window.console&&(e=window.console),e};return{LOG_LEVELS:e,setLogLevel:function(t){i("level",e[t]||e.LEVEL_LOG)},debug:function(t){o(e.LEVEL_LOG,"log",arguments)},info:function(t){o(e.LEVEL_INFO,"info",arguments)},warn:function(t){o(e.LEVEL_WARN,"warn",arguments)},error:function(t){o(e.LEVEL_ERROR,"error",arguments)}}}(),s="SDK: \x3c!--API--\x3e is deprecated. Please use \x3c!--NEWAPI--\x3e instead.",a=function(){return window.top!==window?window.top:window||window.self},g=function(){return window.top!==window?window.parent:window.top||window.self},c=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)})};(function(){return window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)})()&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}e.prototype=window.Event.prototype,window.CustomEvent=e}();var p=function(e){if(!e)return e;var t;return window.atob?t=window.atob:a().atob&&(t=a().atob),"function"==typeof t?t(e):e},l=function(){function e(){var e=/\w*MSIE 9.0;\s*\w+?/;return/\w*MSIE 8.0;\s*\w+?/.test(window.navigator.userAgent)?"msie8":e.test(window.navigator.userAgent)?"msie9":"default"}function t(){}function r(t){if(!t)throw new Error("unable to post message: no args provided");var r=t.target,i=t.service,o=t.method,n=t.parameters;if(!r)throw new Error("unable to post message: target is undefined");var s={destination:i,method:o,parameters:n},a=e();l[a].sendMessage(r,"*",s)}function i(e,t){var i=o[e],n={};if(i)for(var s=0;s<i.length;s++)!function(i){n[i]=function(o){try{r({service:e,method:i,parameters:o,target:t})}catch(e){console.error("sendMessage %s ",e.message)}}}(i[s]);return n}function n(e){s(e)}function s(e){var t=e.data;if(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}if("string"==typeof t.destination&&"string"==typeof t.method){var r=t.destination,i=t.method,o=t.parameters||{},n=r?p[r]:void 0;n&&i&&"function"==typeof n[i]&&n[i].call(n,o,e)}}}function a(e,t){if(e)if("object"==typeof p[e])for(var r in t)t.hasOwnProperty(r)&&(p[e][r]=t[r]);else p[e]=t}function g(){var t=e();l[t].startListening(n,"*",500)}var c={},p={};t.prototype={msie8:{sendMessage:function(e,t,r){var i,o=[],n={};if(t){r="object"==typeof r?JSON.stringify(r):r,e=e||parent;for(var s=-1,a=o.length,g=0;g<a;g++)if(o[g]==e){s=g;break}-1===s&&(s=o.length,o.push(e)),n[s]||(n[s]=[]),n[s].push({source:location.href,message:r}),i&&clearInterval(i),i=null,i=setInterval(function(){for(var e in n)o[e].name=JSON.stringify(n[e]);o=[],n={}},250)}},startListening:function(e,t,r){var i;i&&clearInterval(i),i=null,r=r||1e3,i=setInterval(function(){var t=window.name;if(t){window.name="";for(var r,i=JSON.parse(t),o=0,n=i.length;o<n;o++)(r=i[o].source)&&"string"==typeof r&&e({origin:r,data:i[o].message})}},r)}},msie9:{sendMessage:function(e,t,r){if("object"==typeof r&&(r=JSON.stringify(r)),!e.postMessage||"function"!=typeof e.postMessage)throw new Error("Unsupported Browser ["+window.navigator.userAgent+"] unable to post message: target does not support postMessage.");e.postMessage(r,t)},startListening:function(e,t,r){"function"==typeof window.addEventListener?window.addEventListener("message",e):"function"==typeof window.attachEvent&&window.attachEvent("onmessage",e)}},default:{sendMessage:function(e,t,r){if(!e.postMessage||"function"!=typeof e.postMessage)throw new Error("Unsupported Browser ["+window.navigator.userAgent+"] unable to post message: target does not support postMessage.");e.postMessage(r,t)},startListening:function(e,t,r){"function"==typeof window.addEventListener?window.addEventListener("message",e):"function"==typeof window.attachEvent&&window.attachEvent("onmessage",e)}}};var l=l||new t;return{getProxy:function(e,t){if(!e)throw new Error("unable to get proxy: no name specified");var r=c[e];return r||(r=i(e,t)),r},handleMessage:n,registerHandler:a,startListening:g}}(),S=function(){function e(e,t){r[e]=t?{callback:t}:void 0}function t(e){var t,i=r[e.type];if(i&&"function"==typeof i.callback){t={detail:{source:e.id||"",message:e.data,time:new Date,targetOrigin:e.targetOrigin}};var n=i.callback.call(null,t);n&&"function"==typeof o[e.type]&&o[e.type](t,n)}}var r={},i={},o={_execute:function(e,t,r){var i={},o="",n=t.detail.targetOrigin;i.id=t.detail.source,i.action=t.detail.message.action||"",i.messageid=Math.random(),e===SitesSDK.MESSAGE_TYPES.GET_ACTIONS?(i.data=r||[],o="appActions"+t.detail.source):e===SitesSDK.MESSAGE_TYPES.GET_APP_TRIGGERS?(i.data=r||[],o="appTriggers"):e===SitesSDK.MESSAGE_TYPES.COPY_CUSTOM_DATA?(i.data=r||[],o="appCopyStyle"):e===SitesSDK.MESSAGE_TYPES.PASTE_CUSTOM_DATA?(i.data=r||[],o="appPasteStyle"):(i.data={},o="appProcessingErrors"+t.detail.source),n.source.postMessage({destination:o,method:"responseData",parameters:i},n.origin)},COPY_CUSTOM_DATA:function(e,t){this._execute(SitesSDK.MESSAGE_TYPES.COPY_CUSTOM_DATA,e,t)},PASTE_CUSTOM_DATA:function(e,t){this._execute(SitesSDK.MESSAGE_TYPES.PASTE_CUSTOM_DATA,e,t)},GET_ACTIONS:function(e,t){this._execute(SitesSDK.MESSAGE_TYPES.GET_ACTIONS,e,t)},GET_TRIGGERS:function(e,t){this._execute(SitesSDK.MESSAGE_TYPES.GET_APP_TRIGGERS,e,t)}};return i.addMessageListener=e,i.execute=t,i}();return{isNumeric:t,getQueryParameters:i,getTopWindow:a,postBox:l,notifySDKError:function(e){var t=new TypeError("SDK Error: "+e);throw n.error(e),t.stack},base64Decode:p,getParentOrTopWindow:g,generateUUID:c,servicesRegistry:S,Logger:n,getNotice:e}}(),SitesSDK=function(e){"use strict";function t(){return e.Logger}function r(){var t=e.getQueryParameters(location.href),r=t&&t.hasOwnProperty("id")&&t.id;if(!r){var i=window.frameElement;r=i&&i.getAttribute("id")}return!1===/^settings/.test(r)&&(r=r.replace(/(?:(^\S*iframe-))(\S+$)/,"$2")),r}function i(){var e=r();return!0===/^settings/.test(e)?"settings":"widget"}function o(){var t=i();return t?!0===/^settings/.test(t)?e.getTopWindow():e.getParentOrTopWindow():window.self||window}function n(){var e=i();return!0===/^settings/.test(e)?u.APP_SETTINGS_ENDPOINT:u.APP_RENDERING_ENDPOINT}function s(t,i){if(t&&"string"==typeof t)if(i&&"object"==typeof i){var s=i||{},a=t,g=o(),c="scsRequest$message"+r(),p={};try{p.action="executeMessageCmd",p.actionArgs={name:a,payload:s},p.requestid=e.generateUUID(),p.location=n(),e.postBox.getProxy("app",g).hostrequest({id:c,field:"$message",value:p})}catch(t){e.notifySDKError("sdk: Error Unable to send message "+a+" with payload "+JSON.stringify(s))}}else e.Logger.warn("Parameter 'payload' is required");else e.Logger.warn("Parameter 'messageType' is required")}function a(t,r){e.servicesRegistry.addMessageListener(t,r)}function g(e,i){if(!e||"string"!=typeof e)return"";if(e&&""===e)return"";if(i&&"function"==typeof i)if(f.hasOwnProperty(e)){var o=n();!0===f[e][o].get.allowed?E[e]&&"function"==typeof E[e].getProperty?E[e].getProperty(r(),i):E.extension.getProperty(e,i):(t().warn("sdk: Property ["+e+"] cannot be fetched from ["+o+"] with getProperty() call."),i(void 0))}else E.extension.getProperty(e,i);else t().error("sdk: getProperty() callback is required for property "+e)}function c(t,i){if(t&&"string"==typeof t&&""!==t)if(t&&f.hasOwnProperty(t)){var o=n();if(!1===f[t][o].set.allowed)return void e.notifySDKError("sdk: Setting of property ["+t+"] is not allowed from "+o);E[t].setProperty(r(),i)}else E.extension.setProperty(t,i)}function p(e,t){var r=JSON.stringify(e||[]);E.extension.getProperty(r,t)}function l(e){E.extension.setProperty("properties",e)}function S(e,t){g(e,t)}var d={},u={SETTINGS_ID_PREFIX:"settings",APP_RENDERING_ENDPOINT:"widget",APP_SETTINGS_ENDPOINT:"settings"};e.Logger.setLogLevel(e.Logger.LOG_LEVELS.LEVEL_WARN);var f={customSettingsData:{name:"customSettingsData",settings:{set:{allowed:!0},get:{allowed:!0}},widget:{set:{allowed:!0},get:{allowed:!0}}},height:{name:"height",settings:{set:{allowed:!1},get:{allowed:!1}},widget:{set:{allowed:!0},get:{allowed:!0}}},width:{name:"width",settings:{set:{allowed:!1},get:{allowed:!1}},widget:{set:{allowed:!0},get:{allowed:!0}}},compSettingsId:{name:"compSettingsId",settings:{set:{allowed:!1},get:{allowed:!0}},widget:{set:{allowed:!1},get:{allowed:!0}}},origCompSettingsId:{name:"origCompSettingsId",settings:{set:{allowed:!1},get:{allowed:!0}},widget:{set:{allowed:!1},get:{allowed:!1}}},instanceId:{name:"instanceId",settings:{set:{allowed:!1},get:{allowed:!0}},widget:{set:{allowed:!1},get:{allowed:!0}}},permissions:{name:"permissions",settings:{set:{allowed:!1},get:{allowed:!0}},widget:{set:{allowed:!1},get:{allowed:!0}}},signDate:{name:"signDate",settings:{set:{allowed:!1},get:{allowed:!0}},widget:{set:{allowed:!1},get:{allowed:!0}}}},y={SETTINGS_UPDATED:"SETTINGS_UPDATED",TRIGGER_ACTIONS:"TRIGGER_ACTIONS",COPY_CUSTOM_DATA:"COPY_CUSTOM_DATA",PASTE_CUSTOM_DATA:"PASTE_CUSTOM_DATA",EXECUTE_ACTION:"EXECUTE_ACTION",GET_ACTIONS:"GET_ACTIONS",GET_TRIGGERS:"GET_TRIGGERS"},w=function(){};w.prototype={callbacks:{},receiveMessage:function(t){e.postBox.registerHandler(t,{hostresponse:function(e){var t=e||{};if(t.hasOwnProperty("action")&&t.hasOwnProperty("data")){var r=t.name||"",i=t.action||"",o=w.prototype.callbacks[i];if(o)for(var n=0;n<o.length;n++)if(o[n].resource===r&&"function"==typeof o[n].handler){var s=o[n].handler,a=o[n].context;s.call(a||null,t.data||{}),o.splice(n,1);break}}}})},registerResponseCallback:function(e,t,r){e?(void 0===w.prototype.callbacks[e]&&(w.prototype.callbacks[e]=[]),w.prototype.callbacks[e].push({resource:t,handler:r,context:void 0})):w.prototype.callbacks[e]=void 0},dispatchMessage:function(t,r,i){var s=o(),a=e.postBox.getProxy(t,s),g="scsRequest$message"+r;i.hasOwnProperty("requestid")||(i.requestid=e.generateUUID()),i.location=n(),a.hostrequest({id:g,field:"$message",value:i})},customSettingsData:{setProperty:function(t,r){if(r&&"object"==typeof r){var i,o={};try{"string"==typeof r?i=JSON.parse(r):"object"==typeof r&&(i=JSON.parse(JSON.stringify(r))),o.action="setProperty",o.actionArgs={name:f.customSettingsData.name,payload:i},w.prototype.dispatchMessage("app",t,o)}catch(t){e.notifySDKError("sdk: Error Unable to save custom settings data "+JSON.stringify(t))}}},getProperty:function(t,r){var i={},o=e.generateUUID();try{w.prototype.registerResponseCallback("getProperty","customSettingsData",r),i.action="getProperty",i.actionArgs={name:f.customSettingsData.name},i.requestid=o,w.prototype.dispatchMessage("app",t,i)}catch(t){e.notifySDKError("sdk: Error SitesSDK.getProperty() : Unable to send host request"+JSON.stringify(t))}}},height:{setProperty:function(e,r){var i,o={};if(r&&"object"==typeof r)t().error("sdk: Error parameter height cannot be an object. Valid values are string,number or function");else try{r?i="function"==typeof r?r():r||"":((i={}).bodyOffsetHeight=window.document.body.offsetHeight+SitesSDK.Utils.getStyle(window.document.body,"marginTop")+SitesSDK.Utils.getStyle(window.document.body,"marginBottom"),i.bodyScrollHeight=0,i.bodyClientHeight=0),i&&(o.action="setProperty",o.actionArgs={name:f.height.name,payload:i},w.prototype.dispatchMessage("app",e,o))}catch(e){t().warn("sdk: setProperty(height) Unable to set height of the iframe "+e.message||"")}}},width:{setProperty:function(e,r){if(r&&""!==r){var i={};try{i.action="setProperty",i.actionArgs={name:f.width.name,payload:r},w.prototype.dispatchMessage("app",e,i)}catch(e){t().warn("sdk: setProperty(width) Unable to set width of the iframe "+e.message||"")}}else t().warn("sdk: setProperty(width) Property 'width' needs to have a value")}},extension:{filePicker:function(){for(var t,i={},o={},n=r(),s=e.generateUUID(),a=0;a<arguments.length;a++)"function"==typeof arguments[a]?t=arguments[a]:i=arguments[a];try{w.prototype.registerResponseCallback("getProperty","scsFilePicker",t),o.action="getProperty",o.actionArgs={name:"scsFilePicker",options:i},o.requestid=s,w.prototype.dispatchMessage("app",n,o)}catch(t){e.notifySDKError("sdk: filePicker() Error Unable to get files with options "+JSON.stringify(i)+" Error "+t.message||"")}},getProperty:function(t,i){var o={},n=r(),s=e.generateUUID();try{w.prototype.registerResponseCallback("getProperty",t,i),o.action="getProperty",o.actionArgs={name:t},o.requestid=s,w.prototype.dispatchMessage("app",n,o)}catch(r){e.notifySDKError("sdk: getProperty() Error Unable to get property "+t+" Error "+r.message||"")}},setProperty:function(t,i){var o=i||"",n={},s=r(),a=e.generateUUID();try{n.action="setProperty",n.actionArgs={name:t,payload:o},n.requestid=a,w.prototype.dispatchMessage("app",s,n)}catch(r){e.notifySDKError("sdk: setProperty() Error Unable to save property "+t+" Error "+r.message||"")}}}};var E=E||new w;return E.receiveMessage("app"),d.MESSAGE_TYPES=y,d.publish=s,d.subscribe=a,d.setProperty=c,d.getProperty=g,d.setProperties=l,d.getProperties=p,d.filePicker=E.extension.filePicker,d.getSiteProperty=S,function(){e.postBox.registerHandler("app",{notify:function(e,t){if(!e.type&&null===e.type)throw new Error("A valid event type is required to propagate the event");var r=e.data||{},i=new CustomEvent(e.type,{detail:{source:e.id||"",message:r,time:new Date,targetOrigin:t},bubbles:!0,cancelable:!0});window.document.dispatchEvent(i)},execute:function(t,r){if(console.log("sdk: MESSAGE EXECUTION HANDLER - Message %s ",JSON.stringify(t)),!t.type&&null===t.type)throw new Error("A valid message type is required.");t.targetOrigin=r,e.servicesRegistry.execute(t)}}),e.postBox.startListening()}(),d}(_core);SitesSDK.Utils=function(e){"use strict";function t(e,t){var r,i=(e.ownerDocument||document).defaultView;return i&&i.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),r=null!==i.getComputedStyle(e,null).getPropertyValue(t)?i.getComputedStyle(e,null).getPropertyValue(t):0):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),r=e.currentStyle[t],!1===/^\d+(px)?$/i.test(r)&&(r=function(t){var r=e.style.left,i=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=r,e.runtimeStyle.left=i,t}(r))),r=null!==r?r:0,parseInt(r,10)}function r(e){if(e&&"string"==typeof e){var t=document.getElementsByTagName("head")[0],r=document.createElement("link");t&&(r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),t.appendChild(r))}}var i={};return i.getStyle=t,i.addSiteThemeDesign=r,i.Logger=e.Logger,i}(_core);var Sites=function(e){"use strict";SitesSDK.Utils.Logger.setLogLevel(SitesSDK.Utils.Logger.LOG_LEVELS.LEVEL_WARN);var t={},r={},i=0,o=function(){return++i},n=function(t,i){t&&Sites.Events.hasOwnProperty(t)||e.notifySDKError("Event ["+t+"] is not supported."),i||e.notifySDKError("EVent callback handler is required."),r[t]=r[t]||[];var n=o();r[t].push({handler:i,id:n});var s=window.addEventListener?"addEventListener":"attachEvent",a=window[s];return t="addEventListener"===s?t:"on"+t,a(t,i,!1),n},s=function(){return function(t,r){var i=n(t,r);return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.addEventListener()","SitesSDK.subscribe(messageType,callback,context)")),i}}(),a=function(t,i){t&&Sites.Events.hasOwnProperty(t)||e.notifySDKError("Event ["+t+"] is not supported."),i||e.notifySDKError("EVent callback handler or id is required.");var o,n=-1,s=r[t];if(s){for(o=0;o<s.length;o++)if(s[o].handler===i||s[o].id===i){n=o;break}}else console.log("Sites SDK Event registration for event %s not found ",t);if(n>=0){var a=i;"function"!=typeof a&&(a=s[o].handler),s.splice(o,1),window.removeEventListener(t,a)}else console.log("Sites SDK Registration for event %s not found",t);SitesSDK.Utils.Logger.warn(e.getNotice("Sites.removeEventListener()","SitesSDK.subscribe(messageType)"))},g=function(t){if(t){var r=window.top!==window?window.parent:window.top,i=e.postBox.getProxy("component",r),o="scsUpdateappWidth"+e.getQueryParameters(location.href).id;if("string"==typeof t){var n=parseInt(t,10);if(isNaN(n))return void e.notifySDKError("Value of width "+t+" is invalid");t=n+"px"}else{if(!e.isNumeric(t))return void e.notifySDKError("Value of width can only be a string or a number");t+="px"}console.log("Sites SDK setWidth dispatching iframe width %s ",t),i.update({id:o,field:"appWidth",value:t}),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.setWidth()","SitesSDK.setProperty('width',args)"))}},c=function(t){var r=window.top!==window?window.parent:window.top,i=e.postBox.getProxy("component",r),o="scsUpdatetriggerActions"+e.getQueryParameters(location.href).id;i.update({id:o,field:"triggerActions",value:{triggerName:t.triggerName,triggerPayload:t.triggerPayload,actions:t.actions}}),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.triggerActions()","SitesSDK.publish(messageType,payload)"))},p=function(t){if(t&&"object"==typeof t)e.notifySDKError("Parameter height cannot be an object. Valid values are string or number");else{var r=window.top!==window?window.parent:window.top,i=e.postBox.getProxy("component",r),o="scsUpdateappHeight"+e.getQueryParameters(location.href).id;if(void 0===t||null===t)(t={}).bodyOffsetHeight=function(e){function t(e,t){var i,o=(e.ownerDocument||document).defaultView;return o&&o.getComputedStyle?(t=t.replace(/([A-Z])/g,"-$1").toLowerCase(),i=null!==o.getComputedStyle(e,null).getPropertyValue(t)?o.getComputedStyle(e,null).getPropertyValue(t):0):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i=e.currentStyle[t],!1===/^\d+(px)?$/i.test(i)&&(i=function(t){var r=e.style.left,i=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft+"px",e.style.left=r,e.runtimeStyle.left=i,t}(i))),i=null!==i?i:0,parseInt(i,r)}var r=10;return e+t(window.document.body,"marginTop")+t(window.document.body,"marginBottom")}(window.document.body.offsetHeight),t.bodyScrollHeight=0,t.bodyClientHeight=0;else if("string"==typeof t){var n=parseInt(t,10);if(isNaN(n))return void e.notifySDKError("Value of parameter height "+t+" invalid");t=n+"px"}else{if(!e.isNumeric(t))return void e.notifySDKError("Value of parameter height can be a string or a number");t+="px"}console.log("Sites SDK setHeight dispatching iframe height ",t),i.update({id:o,field:"appHeight",value:t}),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.setHeight()","SitesSDK.setProperty('height',args)"))}};return t.addEventListener=s,t.removeEventListener=a,t.setHeight=p,t.setWidth=g,t.triggerActions=c,t}(_core);Sites.Events={SETTINGS_UPDATED:"SETTINGS_UPDATED",EXECUTE_ACTION:"EXECUTE_ACTION",COPY_CUSTOM_DATA:"COPY_CUSTOM_DATA",PASTE_CUSTOM_DATA:"PASTE_CUSTOM_DATA",GET_ACTIONS:"GET_ACTIONS",GET_TRIGGERS:"GET_TRIGGERS"},Sites.HOST_REPLYTO_MESSAGE_TYPES={COPY_CUSTOM_DATA:"COPY_CUSTOM_DATA",PASTE_CUSTOM_DATA:"PASTE_CUSTOM_DATA",GET_APP_ACTIONS:"GET_APP_ACTIONS",GET_APP_TRIGGERS:"GET_APP_TRIGGERS"},Sites.Properties={CUSTOM_SETTINGS_DATA:"CUSTOM_SETTINGS_DATA"},Sites.Settings=function(e){"use strict";var t={},r={SETTINGS_STORAGE_LIMIT:1500},i=function(t,r){var i=e.getTopWindow(),o=e.postBox.getProxy("app",i),n="scsRequest$message"+Sites.Utils.getCompId(),s={},a=e.generateUUID();if(t&&"function"==typeof r&&t&&Sites.Properties.hasOwnProperty(t))try{e.postBox.registerHandler("app",{hostresponse:function(e){var t=e||{};t.hasOwnProperty("action")&&t.hasOwnProperty("data")&&"getProperty"===t.action&&t.requestid===a&&r(t.data||{})}}),s.action="getProperty",s.actionArgs={name:t},s.requestid=a,s.location="settings",o.hostrequest({id:n,field:"$message",value:s}),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getProperty()","SitesSDK.getProperty()"))}catch(t){e.notifySDKError("SDK: Sites.Settings.getProperty() : Unable to send host request"+JSON.stringify(t))}},o=function(){var t=e.getQueryParameters(location.href).currCompId;return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getCurrCompId()","SitesSDK.getProperty()")),t},n=function(t,r){var i=e.getTopWindow();e.postBox.getProxy("component",i).notify({id:r,data:t,type:Sites.Events.SETTINGS_UPDATED}),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.triggerSettingsUpdatedEvent()","SitesSDK.publish(messageType,payload)"))},s=function(t){var r=o(),i=e.getTopWindow();e.postBox.getProxy("component",i).refresh({id:r,data:t}),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.refreshApp()"," SitesSDK.publish(messageType,payload)"))},a=function(t){if(t)try{if(("string"!=typeof t?JSON.stringify(t):t).length>r.SETTINGS_STORAGE_LIMIT)return void e.notifySDKError("Sites SDK Error: Settings Storage is limited to "+r.SETTINGS_STORAGE_LIMIT+" characters")}catch(r){e.notifySDKError("Sites SDK Error: Parsing failed for params "+t+" Exception Stack"+JSON.stringify(r))}var i=t||{},o=Sites.Utils.getCompId(),n=e.getTopWindow(),s=e.postBox.getProxy("component",n),a="scsUpdatecustomSettingsData"+o;try{"string"==typeof t?i=JSON.parse(t):"object"==typeof t&&(i=JSON.parse(JSON.stringify(t))),s.update({id:a,field:"customSettingsData",value:i})}catch(t){e.notifySDKError("Sites SDK Error: Unable to save custom settings data "+JSON.stringify(t))}SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.storeCustomSettingsData()","SitesSDK.setProperty('customSettingsData',value)"))},g=function(){var t=Sites.Utils.getCompId(),r=e.getTopWindow(),i=e.postBox.getProxy("component",r),o="scsUpdatecompSettingsId"+t,n=Sites.Settings.getCompSettingsId();try{i.update({id:o,field:"compSettingsId",value:n})}catch(t){e.notifySDKError("Sites SDK Error: Unable notify host site on update of settings data "+JSON.stringify(t))}SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.notifySiteOnSettingsUpdate()","SitesSDK.publish(messageType,payload) "))},c=function(){var t=e.getQueryParameters(window.location.href).settingsId||"";return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getCompSettingsId()","SitesSDK.getProperty()")),t},p=function(){var t=e.getQueryParameters(window.location.href).origSettingsId||"";return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Settings.getOrigCompSettingsId()","SitesSDK.getProperty()")),t};return t.getCurrCompId=o,t.triggerSettingsUpdatedEvent=n,t.refreshApp=s,t.storeCustomSettingsData=a,t.getCompSettingsId=c,t.getOrigCompSettingsId=p,t.notifySiteOnSettingsUpdate=g,t.getProperty=i,t}(_core),Sites.Rendering=function(e){"use strict";var t={},r=function(t){var r=e.getParentOrTopWindow(),i=e.postBox.getProxy("app",r),o="scsRequestmessage"+e.getQueryParameters(location.href).id,n={},s=e.generateUUID();if("function"==typeof t){try{e.postBox.registerHandler("app",{hostresponse:function(e){var r=e||{};if(r.hasOwnProperty("action")&&r.hasOwnProperty("data")&&"getThemeDesign"===r.action&&r.requestid===s){var i=r.data||{};i.hasOwnProperty("url")&&t({url:i.url})}}}),n.action="getThemeDesign",n.requestid=s,i.hostrequest({id:o,field:"message",value:n})}catch(t){e.notifySDKError("Sites SDK Error: Unable to send host request"+JSON.stringify(t))}SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Rendering.getThemeDesign()","SitesSDK.getSiteProperty()"))}},i=function(t){if(t&&"string"==typeof t){var r=document.getElementsByTagName("head")[0],i=document.createElement("link");r&&(i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",t),r.appendChild(i)),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Rendering.injectThemeDesign()","SitesSDK.Utils.addSiteThemeDesign(cssUrl)"))}};return t.getThemeDesign=r,t.injectThemeDesign=i,t}(_core),Sites.Messaging=function(e){"use strict";var t={},r=function(t,r,i){t||e.notifySDKError("replyToHost: Parameter originMessageContext is missing. "),r||e.notifySDKError("replyToHost: Parameter replyToMessageType is missing"),r&&Sites.HOST_REPLYTO_MESSAGE_TYPES.hasOwnProperty(r)||e.notifySDKError("replyTo: Message type ["+r+"] is not supported by host.");var o={},n="",s=t.detail.targetOrigin;o.id=t.detail.source,o.action=t.detail.message.action||"",o.messageid=Math.random(),r===Sites.HOST_REPLYTO_MESSAGE_TYPES.GET_APP_ACTIONS?(o.data=i||[],n="appActions"+t.detail.source):r===Sites.HOST_REPLYTO_MESSAGE_TYPES.GET_APP_TRIGGERS?(o.data=i||[],n="appTriggers"):r===Sites.HOST_REPLYTO_MESSAGE_TYPES.COPY_CUSTOM_DATA?(o.data=i||[],n="appCopyStyle"):r===Sites.HOST_REPLYTO_MESSAGE_TYPES.PASTE_CUSTOM_DATA?(o.data=i||[],n="appPasteStyle"):(o.data={},n="appProcessingErrors"+t.detail.source),s.source.postMessage({destination:n,method:"receiveMessage",parameters:o},s.origin),SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Messaging.replyToHost()","SitesSDK.receiveMessage(type,callback,this)"))};return t.replyToHost=r,t}(_core),Sites.Utils=function(e){"use strict";function t(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCompSettingsId()","SitesSDK.getProperty()")),e.getQueryParameters(window.location.href).settingsId}function r(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCompId()","SitesSDK.getProperty()")),e.getQueryParameters(location.href).id}function i(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCacheBuster()","SitesSDK.getProperty()")),e.getQueryParameters(location.href).cacheBuster}function o(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getInstance()","SitesSDK.getProperty()")),e.getQueryParameters(location.href).instance}function n(){var t,r=e.getQueryParameters(location.href).instance.split(".")[0]||{};try{r=e.base64Decode(r);var i=JSON.parse(r);t=i&&i.hasOwnProperty("instanceid")?i.instanceid:""}catch(e){t=""}return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getInstanceId()","SitesSDK.getProperty()")),t}function s(){var t,r=e.getQueryParameters(location.href).instance.split(".")[0]||{};try{r=e.base64Decode(r);var i=JSON.parse(r);t=i&&i.hasOwnProperty("permissions")?i.permissions:""}catch(e){t=""}return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getPermissions()","SitesSDK.getProperty()")),t}function a(){var t="",r=e.getQueryParameters(location.href).instance.split(".")[0]||{};try{r=e.base64Decode(r);var i=JSON.parse(r);if(i&&i.hasOwnProperty("signdate")){var o=i.signdate;t=new Date(Number(o)).toDateString()}}catch(e){t=""}return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getSignDate()","SitesSDK.getProperty()")),t}function g(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getViewMode()","SitesSDK.getProperty()")),e.getQueryParameters(location.href).viewMode}function c(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getWidth()","SitesSDK.getProperty()")),e.getQueryParameters(location.href).width}function p(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getHeight()","SitesSDK.getProperty()")),e.getQueryParameters(location.href).height}function l(){return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getLocale()","SitesSDK.getProperty()")),e.getQueryParameters(location.href).locale}function S(){var t,r=e.getQueryParameters(location.href).customSettingsData||"{}";try{t=JSON.parse(r)}catch(e){t={}}return SitesSDK.Utils.Logger.warn(e.getNotice("Sites.Utils.getCustomSettingsData()","SitesSDK.getProperty()")),t}var d={};return d.getCompId=r,d.getCacheBuster=i,d.getInstanceId=n,d.getInstance=o,d.getSignDate=a,d.getPermissions=s,d.getViewMode=g,d.getWidth=c,d.getHeight=p,d.getLocale=l,d.getCustomSettingsData=S,d.getCompSettingsId=t,d}(_core);
